- id: '1529366648322'
  alias: Open Chicken Door At Morning
  description: Open at Dawn
  trigger:
  - event: sunrise
    offset: -00:30:00
    platform: sun
  condition: []
  action:
  - entity_id: cover.chicken_coop_door
    service: cover.open_cover
  mode: single
- id: '1541895123590'
  alias: Garage CCTV Offline
  trigger:
  - entity_id: binary_sensor.garage_cctv_online
    for: 00:10:00
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      message: Garage CCTV Offline
    service: notify.google_cloud_notify
- id: '1541895123591'
  alias: Drive CCTV Offline
  trigger:
  - entity_id: binary_sensor.drive_cctv_online
    for: 00:10:00
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      message: Drive CCTV Offline
    service: notify.google_cloud_notify
- id: '1541895123592'
  alias: Door CCTV Offline
  trigger:
  - entity_id: binary_sensor.front_door_cctv_online
    for: 00:10:00
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      message: Front Door CCTV Offline
    service: notify.google_cloud_notify
- id: '1544967364329'
  alias: Battery Low tradfri_remote_control [Replaced by blueprint "Low battery level
    detection & notification for all battery sensors"]
  description: ''
  trigger:
  - below: '20'
    entity_id: sensor.tradfri_remote_control
    platform: numeric_state
  condition: []
  action:
  - data:
      message: Living room Tradfri remote battery low. Currently {{ states('sensor.tradfri_remote_control')}}%
    service: notify.google_cloud_notify
  mode: single
- id: '1544967729500'
  alias: Battery Low tradfri_wireless_dimmer [Replaced by blueprint "Low battery level
    detection & notification for all battery sensors"]
  trigger:
  - below: '25'
    entity_id: sensor.tradfri_wireless_dimmer
    platform: numeric_state
  condition: []
  action:
  - data:
      message: 'Master bedroom Tradfri remote battery low. Currently {{ states(''sensor.tradfri_wireless_dimmer'')
        }}% '
    service: notify.google_cloud_notify
  mode: single
- id: '1557360744014'
  alias: Increment TOR DB Disconnect Automation
  trigger:
  - entity_id: binary_sensor.tor_db_status
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      entity_id: counter.tor_db_disconnect_counter
    service: counter.increment
- id: '1558317969078'
  alias: CCTV Reboot Each Day
  trigger:
  - at: 06:45
    platform: time
  condition: []
  action:
  - service: rest_command.cctv_front_door_restart
  - delay: '10:00'
  - service: rest_command.cctv_drive_restart
  - delay: '10:00'
  - service: rest_command.cctv_garage_restart
  - delay: '10:00'
  - service: rest_command.cctv_garage2_restart
  - delay: '10:00'
  - service: rest_command.cctv_garden_restart
- id: '1564192629041'
  alias: 'Irrigation: Pot Irrigation Script Off to Valve Off'
  description: 'If script is turned off manually, then close valve, else it will stay
    open. '
  trigger:
  - entity_id: script.front_garden_pot_irrigation_timer
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      entity_id: switch.front_garden_pot_irrigation_valve
    service: switch.turn_off
- id: '1564192623451'
  alias: 'Irrigation: Irrigate Front Garden Pots at Sunrise'
  trigger:
  - platform: template
    value_template: '{{states(''sensor.time'') == states(''sensor.front_garden_pot_irrigation_next_run'')[19:24]}}'
  condition:
  - condition: and
    conditions:
    - condition: template
      value_template: '{{states(''sensor.front_garden_pot_irrigation_next_run'')[5:15]
        == now().date().strftime(''%d-%m-%Y'')}}'
    - condition: state
      entity_id: sensor.front_garden_pots_irrigation_interlock
      state: Uninhibited
  action:
  - entity_id: script.front_garden_pot_irrigation_timer
    service: script.front_garden_pot_irrigation_timer
- id: '1564192123451'
  alias: 'Irrigation: Irrigate Back Garden at Sunrise'
  description: With editable offset
  trigger:
  - platform: template
    value_template: '{{states(''sensor.time'') == states(''sensor.back_garden_irrigation_next_run'')[19:24]}}'
  condition:
  - condition: and
    conditions:
    - condition: template
      value_template: '{{states(''sensor.back_garden_irrigation_next_run'')[5:15]
        == now().date().strftime(''%d-%m-%Y'')}}'
    - condition: state
      entity_id: sensor.back_garden_irrigation_interlock
      state: Uninhibited
  action:
  - entity_id: script.back_garden_irrigation_timer
    service: script.back_garden_irrigation_timer
- id: '1564192123123'
  alias: 'Irrigation: Irrigate Back Garden Lawn at Sunrise'
  trigger:
  - platform: template
    value_template: '{{states(''sensor.time'') == states(''sensor.back_garden_lawn_irrigation_next_run'')[19:24]}}'
  condition:
  - condition: and
    conditions:
    - condition: template
      value_template: '{{states(''sensor.back_garden_lawn_irrigation_next_run'')[5:15]
        == now().date().strftime(''%d-%m-%Y'')}}'
    - condition: state
      entity_id: sensor.back_garden_lawn_irrigation_interlock
      state: Uninhibited
  action:
  - delay: 1 hour
  - entity_id: script.back_garden_lawn_irrigation_timer
    service: script.back_garden_lawn_irrigation_timer
- id: '1564192623452'
  alias: 'Irrigation: Irrigate Front Lawn at Sunrise'
  trigger:
  - platform: template
    value_template: '{{states(''sensor.time'') == states(''sensor.front_garden_lawn_irrigation_next_run'')[19:24]}}'
  condition:
  - condition: and
    conditions:
    - condition: template
      value_template: '{{states(''sensor.front_garden_lawn_irrigation_next_run'')[5:15]
        == now().date().strftime(''%d-%m-%Y'')}}'
    - condition: state
      entity_id: sensor.front_garden_lawn_irrigation_interlock
      state: Uninhibited
  action:
  - entity_id: script.front_garden_lawn_irrigation_timer
    service: script.front_garden_lawn_irrigation_timer
- id: '1564234217905'
  alias: 'Irrigation: Lawn Irrigation Script Off to Valve Off'
  description: 'If script is turned off manually, then close valve, else it will stay
    open. '
  trigger:
  - entity_id: script.front_garden_lawn_irrigation_timer
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      entity_id: switch.front_garden_lawn_irrigation_valve
    service: switch.turn_off
- id: '1512334217905'
  alias: 'Irrigation: Garden Irrigation Script Off to Valve Off'
  description: 'If script is turned off manually, then close valve, else it will stay
    open. '
  trigger:
  - entity_id: script.back_garden_irrigation_timer
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      entity_id: switch.back_garden_irrigation_valve
    service: switch.turn_off
- id: '1512331237905'
  alias: 'Irrigation: Garden Lawn Irrigation Script Off to Valve Off'
  description: 'If script is turned off manually, then close valve, else it will stay
    open. '
  trigger:
  - entity_id: script.back_garden_lawn_irrigation_timer
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - entity_id: switch.back_garden_lawn_1_irrigation_valve
    service: switch.turn_off
  - entity_id: switch.back_garden_lawn_2_irrigation_valve
    service: switch.turn_off
- id: '1564245956941'
  alias: Kitchen Fan Script Off to Switch Off
  description: Not sure why I wrote this?
  trigger:
  - entity_id: script.kitchen_extractor_timer
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      entity_id: switch.kitchen_extractor_fan
    service: switch.turn_off
  mode: single
- id: '1572464632861'
  alias: Smoke Machine Automation
  description: ''
  trigger:
  - device_id: f748f07b6b70459db34b99aca1a33d4b
    domain: light
    entity_id: light.sofa_left
    platform: device
    type: turned_on
  - event_data: {}
    event_type: smoke_machine_automation
    platform: event
  condition: []
  action:
  - data:
      entity_id: switch.smoke_machine
    service: switch.toggle
  - delay: 00:00:15
  - event: smoke_machine_automation
    event_data: {}
- id: '1576597572390'
  alias: 'Christmas: Outside lights off at night'
  description: Christmas Light Automation - Turn off outside lights at night
  trigger:
  - at: '23:10:00'
    platform: time
  condition: []
  action:
  - data: {}
    entity_id: light.outside_christmas_lights
    service: light.turn_off
  mode: single
- id: '1576597714781'
  alias: 'Christmas : Outside lights on at sun set'
  description: Christmas Light Automation - Turn on outside lights at night
  trigger:
  - event: sunset
    offset: 00:15:00
    platform: sun
  condition: []
  action:
  - service: light.turn_on
    data: {}
    entity_id: light.outside_christmas_lights
  mode: single
- id: '1576598300322'
  alias: 'Christmas: Inside lights on when home'
  description: Christmas Light Automation - Turn on inside lights when we get home
  trigger:
  - from: not_home
    platform: state
    to: home
    entity_id: person.richard
  - platform: state
    entity_id: person.lucy
    from: not_home
    to: home
  condition: []
  action:
  - entity_id: light.inside_christmas_lights
    service: light.turn_on
  mode: single
- id: '1576598493358'
  alias: 'Christmas: Inside lights off when away'
  description: Christmas Light Automation - Turn off inside lights when we leave home
  trigger:
  - entity_id: person.richard
    from: home
    platform: state
    to: not_home
  - entity_id: person.lucy
    from: home
    platform: state
    to: not_home
  condition: []
  action:
  - service: light.turn_off
    data: {}
    entity_id: light.inside_christmas_lights
  mode: single
- id: '1576599112935'
  alias: Welcome home Richard
  description: 'Note: These actions can only be edited with YAML'
  trigger:
  - entity_id: person.richard
    for: 00:05:00
    from: not_home
    platform: state
    to: home
  condition: []
  action:
  - data_template:
      cache: false
      entity_id: media_player.ground_floor
      message: "Welcome home Richard. {% if is_state('person.lucy', 'home')  %} Lucy\
        \ is also at home and needs cuddles! {%- else -%}\n    Lucy is away at {{state_attr('device_tracker.google_maps_114635444798949098363',\
        \ 'address')}}.\n {%- endif %}\n    Outside {{states('sensor.dark_sky_temperature')|\
        \ round(0)}}C {{states('sensor.dark_sky_humidity')| round(0) }}% Inside {{states('sensor.entryway_thermostat_temperature')|\
        \ round(0)}}C \n{{states('sensor.entryway_thermostat_humidity')| round(0)}}%\
        \ {% if is_state('climate.entryway', 'heat') %} Heating on and set to {{state_attr('climate.entryway',\
        \ 'temperature')| round(0) }}°C\n{%- endif %}\n"
    service: tts.google_translate_say
- id: '1576601014597'
  alias: Plug-in Air Freshener Start
  description: Turn on in the morning when someone is home as long as it between certain
    times. Also turns back on after returning home.
  trigger:
  - entity_id: person.lucy
    for: 00:10:00
    from: not_home
    platform: state
    to: home
  - at: '10:01:00'
    platform: time
  - entity_id: person.richard
    for: 00:10:00
    from: not_home
    platform: state
    to: home
  condition:
  - condition: and
    conditions:
    - after: '10:00:00'
      before: '18:00:00'
      condition: time
    - condition: state
      entity_id: input_boolean.plugin_air_freshener_enable
      state: 'on'
    - condition: or
      conditions:
      - condition: state
        entity_id: person.richard
        state: home
      - condition: state
        entity_id: person.lucy
        state: home
  action:
  - data: {}
    entity_id: switch.plug_in_air_freshener_1
    service: switch.turn_on
  - data: {}
    entity_id: switch.plug_in_air_freshener_2
    service: switch.turn_on
  - data:
      message: Plug in air freshener turned on
    service: notify.google_cloud_notify
  mode: single
- id: '1576601191279'
  alias: Plug-in Air Freshener Stop
  description: Turn off in the evening or when no one is home.
  trigger:
  - at: '18:00:00'
    platform: time
  - entity_id: person.richard
    from: home
    platform: state
    to: not_home
  - entity_id: person.lucy
    from: home
    platform: state
    to: not_home
  condition: []
  action:
  - entity_id: switch.plug_in_air_freshener_1
    service: switch.turn_off
  - delay: 00:00:15
  - entity_id: switch.plug_in_air_freshener_2
    service: switch.turn_off
  - data:
      message: Plug in air freshener turned off
    service: notify.google_cloud_notify
  mode: single
- id: '1576601770197'
  alias: Welcome home Lucy
  description: 'Note: These actions can only be edited with YAML'
  trigger:
  - entity_id: person.lucy
    for: 00:05:00
    from: not_home
    platform: state
    to: home
  condition: []
  action:
  - data_template:
      cache: false
      entity_id: media_player.ground_floor
      message: "Welcome home Lucy. {% if is_state(\"person.richard\", \"home\")  %}\
        \ Richard is also at home, please see him for cuddles! {%- else -%}\n    Richard\
        \ is currently {{states('person.richard')}}, at\n{{states('sensor.richard_street_location')}}.\
        \ {%- endif %} The heating is set to {{states('climate.entryway')}} at {{state_attr('climate.entryway',\
        \ 'temperature')| round(0) }}°C\n"
    service: tts.google_translate_say
- id: '1576602219341'
  alias: Keep Nest thermostat aware of our presence
  description: contindion template {{ state_attr('climate.entryway', 'preset_mode')
    == Away and Eco }}
  trigger:
  - minutes: /10
    platform: time_pattern
  - event: start
    platform: homeassistant
  - entity_id: binary_sensor.huishs_away
    from: 'off'
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: group.mobiles_group
    state: home
  - condition: state
    entity_id: binary_sensor.huishs_away
    state: 'on'
  action:
  - data:
      away_mode: home
    service: nest.set_away_mode
  - data:
      message: Nest forced back to heat mode while you are at home.
    service: notify.google_cloud_notify
- id: '1576603673930'
  alias: Close Chicken Door In The Evening Via Notification (action button has been
    clicked)
  description: Notification HTML5 push notification action button clicked
  trigger:
  - event_data:
      action: close_door
    event_type: html5_notification.clicked
    platform: event
  condition: []
  action:
  - entity_id: cover.chicken_coop_door
    service: cover.close_cover
  mode: single
- id: '1576603849046'
  alias: Close Chicken Door In The Evening Via Notification
  description: ''
  trigger:
  - event: sunset
    offset: +02:00:00
    platform: sun
  condition:
  - condition: state
    entity_id: binary_sensor.chicken_coop_status
    state: 'on'
  action:
  - service: notify.google_cloud_notify
    data:
      title: Chicken Bed-Time? [Home Assistant]
      message: It's dark, close chicken coop door?
      data:
        actions:
        - action: close_door
          title: Yes close chicken coop door
  mode: single
- id: '1581770041173'
  alias: 'Notify: Electricity supply voltage is HIGH'
  description: Send Notification when Electricity Voltage is High
  trigger:
  - above: '254'
    entity_id: sensor.ups_input_voltage
    platform: numeric_state
  condition: []
  action:
  - data:
      message: 'Electricity Voltage High: {{ states(''sensor.ups_input_voltage'')
        }} Volts. {{now().strftime(''%Y-%m-%d %I:%M %p'')}}

        '
      title: Electricity Supply Voltage High
    service: notify.google_cloud_notify
- id: '1581770209868'
  alias: 'Notify: Electricity supply voltage is LOW'
  description: ''
  trigger:
  - below: '220'
    entity_id: sensor.ups_input_voltage
    platform: numeric_state
  condition: []
  action:
  - data:
      message: 'Electricity Voltage Low: {{ states(''sensor.ups_input_voltage'') }}
        Volts. {{now().strftime(''%Y-%m-%d %I:%M %p'')}}

        '
      title: Electricity Supply Voltage Low
    service: notify.google_cloud_notify
- id: '1581770321118'
  alias: 'Notify: UPS is close to being depleted'
  description: Send Notification when UPS is about to shutdown (10 mins left)
  trigger:
  - below: '10'
    entity_id: sensor.ups_time_left
    platform: numeric_state
  condition: []
  action:
  - data:
      message: 'UPS is running low: {{ states(''sensor.ups_time_left'')}}minutes left.
        {{now().strftime(''%Y-%m-%d %I:%M %p'')}}

        '
      title: 'WARNING: UPS close to being depleted'
    service: notify.google_cloud_notify
- id: '1581773259354'
  alias: Bunny shed status monitor
  description: Monitor the health of my gateways
  trigger:
  - entity_id: binary_sensor.bs_status
    for: 00:00:30
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      message: Irrigation Controller has gone offline. {{now().strftime('%Y-%m-%d
        %I:%M %p')}}
      title: Irrigation offline
    service: notify.google_cloud_notify
- id: '1581773383827'
  alias: Irrigation controller status monitor
  description: Monitor the health of my gateways
  trigger:
  - entity_id: binary_sensor.ic_front_status
    for: '5 minutes '
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      message: Irrigation Controller has gone offline. {{now().strftime('%Y-%m-%d
        %I:%M %p')}}
      title: Irrigation offline
    service: notify.google_cloud_notify
- id: '1581773123827'
  alias: 'Notify: Possible DDOS attack'
  trigger:
  - above: '70000'
    entity_id: sensor.pi_hole_dns_queries_today
    platform: numeric_state
  action:
  - data:
      message: 'DNS Queries: {{ states(''sensor.pi_hole_dns_queries_today'') }}

        '
      title: Possible DDOS Attack from inside network
    service: notify.google_cloud_notify
- id: '1581123123827'
  alias: Simulate presence
  description: Automation Simulate Presence / Occupancy Simulation
  trigger:
  - entity_id: person.richard
    from: home
    platform: state
    to: not_home
  - event: sunset
    offset: +00:30:00
    platform: sun
  - event_type: event_simulate_presence
    platform: event
  - entity_id: person.lucy
    from: home
    platform: state
    to: not_home
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: sun.sun
      state: below_horizon
    - before: '23:55:00'
      condition: time
    - condition: state
      entity_id: input_boolean.simulate_presence_enable
      state: 'on'
    - condition: state
      entity_id: person.lucy
      state: not_home
    - condition: state
      entity_id: person.richard
      state: not_home
  action:
  - data_template:
      entity_id: light.lamp_{{ (range(1, 4) | random) }}
    service: light.turn_on
  - delay: 00:{{ (range(10, 30) | random) }}:00
  - data_template:
      entity_id: light.lamp_{{ (range(1, 4) | random) }}
    service: light.turn_on
  - delay: 00:{{ (range(10, 30) | random) }}:00
  - entity_id: light.lamp_1
    service: light.turn_off
  - entity_id: light.lamp_2
    service: light.turn_off
  - entity_id: light.lamp_3
    service: light.turn_off
  - delay: 00:00:{{ (range(3, 10) | random) }}
  - event: event_simulate_presence
  mode: single
- id: '1586039811102'
  alias: Busylight Controller Free Button Pressed
  description: ''
  trigger:
  - device_id: 881a0e3accbc43d7b2bbc2b4559863b4
    domain: binary_sensor
    entity_id: binary_sensor.button_a
    platform: device
    type: turned_on
  condition: []
  action:
  - data: {}
    entity_id: script.1585906019835
    service: script.turn_on
- id: '1586039888917'
  alias: Busylight Controller Working Button Pressed
  description: ''
  trigger:
  - device_id: 881a0e3accbc43d7b2bbc2b4559863b4
    domain: binary_sensor
    entity_id: binary_sensor.button_b
    platform: device
    type: turned_on
  condition: []
  action:
  - data: {}
    entity_id: script.1585906111236
    service: script.turn_on
- id: '1586039921673'
  alias: Busylight Controller On Call Button Pressed
  description: ''
  trigger:
  - device_id: 881a0e3accbc43d7b2bbc2b4559863b4
    domain: binary_sensor
    entity_id: binary_sensor.button_c
    platform: device
    type: turned_on
  condition: []
  action:
  - data: {}
    entity_id: script.1585905714103
    service: script.turn_on
- id: '1586868059957'
  alias: House Doorbell Button External Notify
  description: https://github.com/home-assistant/core/issues/32236
  trigger:
  - device_id: b03ab12c707340e8849888171a79caed
    domain: binary_sensor
    entity_id: binary_sensor.doorbell_button
    platform: device
    type: turned_on
  condition: []
  action:
  - data:
      message: Ding Dong! Someone is at the door. Get the biohazard suit out!
      title: Doorbell Alert☣️
    service: notify.pushover_notify_doorbell
  - data:
      filename: /config/www/tmp/front_door.jpg
    service: camera.snapshot
    entity_id: camera.front_door_11
  - data:
      data:
        attachment: /config/www/tmp/front_door.jpg
      message: Photo of the infectious!
      title: Doorbell CCTV Photo
    service: notify.pushover_notify_doorbell
  mode: single
- id: '1587600361094'
  alias: Busylight Controller Away Button Pressed
  description: Set to turn off lights when controller goes offline
  trigger:
  - device_id: 90dc8f86fc67483880990d09cd5cf02c
    domain: binary_sensor
    entity_id: binary_sensor.busy_light_controller_status
    for:
      hours: 0
      minutes: 0
      seconds: 5
    platform: device
    type: not_connected
  condition: []
  action:
  - data: {}
    entity_id: script.1586361703646
    service: script.turn_on
  mode: single
- id: '1590103997253'
  alias: 'Server Getting Hot '
  description: ''
  trigger:
  - above: '65'
    entity_id: sensor.server_server_raid_controller_temperature
    platform: numeric_state
  condition: []
  action:
  - data:
      message: Server is getting HOT!
    service: notify.google_cloud_notify
- id: '1592486159377'
  alias: Parcel Box Opened Nofity
  description: ''
  trigger:
  - entity_id: binary_sensor.parcel_box_sensor
    from: 'off'
    platform: state
    to: 'on'
  condition: []
  action:
  - data:
      message: Parcel box has just been opened
      title: Delivery
    service: notify.pushover_notify
  - data:
      filename: /config/www/tmp/drive.jpg
    entity_id: camera.drive_high_16
    service: camera.snapshot
  - data:
      data:
        attachment: /config/www/tmp/drive.jpg
      message: Delivery person?
      title: Driveway CCTV Photo
    service: notify.pushover_notify
  - data:
      cache: false
      entity_id: media_player.whole_house
      message: Parcel box has just been opened
    service: tts.google_translate_say
  mode: single
- id: '1592498327466'
  alias: House Doorbell Button Local Notify
  description: CCTV needs to have anonymous viewer enabled or I need to pass the username
    in the media_content_id. Note, during testing you need to turn off the media_player
    device after each test, else is will not show the video again.
  trigger:
  - device_id: b03ab12c707340e8849888171a79caed
    domain: binary_sensor
    entity_id: binary_sensor.doorbell_button
    platform: device
    type: turned_on
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: person.richard
      state: home
    - condition: state
      entity_id: person.lucy
      state: home
  action:
  - data:
      cache: false
      entity_id: media_player.living_room_speaker
      message: Ding! Dong! Someone is at the door
    service: tts.google_translate_say
  - data:
      media_content_id: http://192.168.4.11/axis-cgi/mjpg/video.cgi
      media_content_type: image/jpg
    entity_id: media_player.office_display
    service: media_player.play_media
  - data:
      media_content_id: http://192.168.4.11/axis-cgi/mjpg/video.cgi
      media_content_type: image/jpg
    entity_id: media_player.bedroom_display
    service: media_player.play_media
  - data:
      media_content_id: http://192.168.4.11/axis-cgi/mjpg/video.cgi
      media_content_type: image/jpg
    entity_id: media_player.kitchen_display
    service: media_player.play_media
  - data:
      cache: false
      entity_id: media_player.lucys_room_speaker
      message: Ding! Dong! Someone is at the door
    service: tts.google_translate_say
  - data:
      cache: false
      entity_id: media_player.garage
      message: Ding! Dong! Someone is at the door
    service: tts.google_translate_say
  mode: single
- id: '1601035873447'
  alias: Secondary Zone Failure
  description: ''
  trigger:
  - platform: zone
    entity_id: device_tracker.google_maps_113691586554404814686
    zone: zone.outer_perimeter
    event: enter
  condition: []
  action:
  - service: notify.google_cloud_notify
    data:
      message: Secondary zone failure
  - service: notify.pushover_notify
    data:
      message: Secondary zone failure
      title: Secondary zone failure
      data:
        sound: tugboat
        priority: 0
  - data:
      cache: false
      entity_id: media_player.whole_house
      message: Notice! Secondary Zone Failure!
    service: tts.google_translate_say
  mode: single
- id: '1601037277352'
  alias: Primary Zone Failure
  description: ''
  trigger:
  - platform: zone
    entity_id: device_tracker.google_maps_113691586554404814686
    zone: zone.inner_perimeter
    event: enter
  condition: []
  action:
  - service: notify.google_cloud_notify
    data:
      message: Primary zone failure
  - service: notify.pushover_notify
    data:
      message: Primary zone failure
      title: Primary zone failure
      data:
        sound: alien
        priority: 1
  - data:
      cache: false
      entity_id: media_player.whole_house
      message: ALERT:Warning! Primary Zone Failure! Warning! Primary Zone Failure!
        Warning! Primary Zone Failure! Close the fucking doors and windows for the
        love of bunnies hide!
    service: tts.google_translate_say
  mode: single
- id: '1601317646616'
  alias: Front Lawn Anti Cat Defences
  description: ''
  trigger:
  - type: motion
    platform: device
    device_id: 853ca02c816df4ce4860c07060837a6a
    entity_id: binary_sensor.front_door_11_vmd4_camera1profile2
    domain: binary_sensor
  - type: motion
    platform: device
    device_id: 99689212065c11ebbd2ecbef1587dfe1
    entity_id: binary_sensor.drive_high_16_vmd4_camera1profile2
    domain: binary_sensor
  condition:
  - condition: and
    conditions:
    - condition: time
      after: '18:00'
      before: 09:00
    - condition: numeric_state
      entity_id: sensor.local_outside_temperature
      above: '3'
  action:
  - delay: 00:00:05
  - service: switch.turn_on
    entity_id: switch.front_garden_lawn_irrigation_valve
  - delay: 00:00:06
  - service: switch.turn_off
    entity_id: switch.front_garden_lawn_irrigation_valve
  mode: single
- id: '1601593330216'
  alias: House Doorbell Button Local Notify (Duplicate)
  description: 'CCTV needs to have anonymous viewer enabled or I need to pass the
    username in the media_content_id:'
  trigger: []
  condition: []
  action:
  - service: camera.play_stream
    data:
      media_player: media_player.office_display
    entity_id: camera.front_door_p3364_l
  mode: single
- id: '1601593900895'
  alias: House Doorbell Button Local Notify (Duplicate) (Duplicate)
  description: 'CCTV needs to have anonymous viewer enabled or I need to pass the
    username in the media_content_id:'
  trigger: []
  condition: []
  action:
  - data:
      media_content_id: http://192.168.4.11/axis-cgi/mjpg/video.cgi
      media_content_type: image/jpg
    entity_id: media_player.kitchen_display
    service: media_player.play_media
  mode: single
- id: '1607604378569'
  alias: AutoHotKey - Webhook Driven - Busy Light - Process Presence Incoming Webhook
  description: 'If the automation is not restarted within 6 minutes due to a new incoming
    webhook, the status is changed to offline.  Ref: https://github.com/ajobbins/AHK-Teams-Presence'
  trigger:
  - platform: webhook
    webhook_id: 6pKQYcAJY3kWdj56MVUYb4tWLr9QmGP7kKYBd5rMBz9r6ZBrQXyKhJPbuYR3vVkV
  condition: []
  action:
  - service: input_text.set_value
    data:
      value: '{{ trigger.json.status }}'
    entity_id: input_text.autohotkey1
  - delay: 00:06:00
  - service: input_text.set_value
    data:
      value: Offline
    entity_id: input_text.autohotkey1
  mode: restart
- id: '1607605238090'
  alias: AutoHotKey - Webhook Driven - Busy Light - Change Busy Light Colours
  description: 'Change an RGB light to signal presence. Ref: https://github.com/ajobbins/AHK-Teams-Presence'
  trigger:
  - platform: state
    entity_id: input_text.autohotkey1
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_text.autohotkey1
        state: Available
      sequence:
      - service: light.turn_on
        data:
          color_name: green
        entity_id: light.busy_light_1
      - service: light.turn_on
        data:
          color_name: green
        entity_id: light.busy_light_2
    - conditions:
      - condition: state
        entity_id: input_text.autohotkey1
        state: Busy
      sequence:
      - service: light.turn_on
        data:
          color_name: orange
        entity_id: light.busy_light_1
      - service: light.turn_on
        data:
          color_name: orange
        entity_id: light.busy_light_2
    - conditions:
      - condition: state
        entity_id: input_text.autohotkey1
        state: Do Not Disturb
      sequence:
      - service: light.turn_on
        data:
          color_name: Red
        entity_id: light.busy_light_1
      - service: light.turn_on
        data:
          color_name: Red
        entity_id: light.busy_light_2
    - conditions:
      - condition: state
        entity_id: input_text.autohotkey1
        state: Away
      sequence:
      - service: light.turn_on
        data:
          color_name: Yellow
        entity_id: light.busy_light_1
      - service: light.turn_on
        data:
          color_name: Yellow
        entity_id: light.busy_light_2
    default:
    - service: light.turn_off
      data: {}
      entity_id: light.busy_light_1
    - service: light.turn_off
      data: {}
      entity_id: light.busy_light_2
  mode: single
- id: '1608749551791'
  alias: Motion-activated Light [Blueprint]
  description: ''
  use_blueprint:
    path: homeassistant/motion_light.yaml
    input:
      motion_entity: binary_sensor.kichen_pir_sensor
      light_target:
        entity_id: light.kitchen_under_counter_lights
      no_motion_wait: '3600'
- id: '1608750110548'
  alias: Low battery level detection & notification for all battery sensors [Blueprint]
  description: ''
  use_blueprint:
    path: Sbyx/low-battery-level-detection-notification-for-all-battery-sensors.yaml
    input:
      day: '0'
      time: '19:00:00'
      actions:
      - service: notify.google_cloud_notify
        data:
          message: 'Low battery warning for: {{sensors}}'
- id: '1612985120601'
  alias: Ice Maker On-Off Schedule [Blueprint]
  description: 'There is a separate automation which turns the ice maker on if the
    water temperature gets too warm '
  use_blueprint:
    path: EPMatt/on_off_schedule_state_persistence.yaml
    input:
      off_time: '22:30:00'
      automation_target:
        entity_id: switch.ice_maker_switch
      on_time: 08:30:00
- id: '1612985880086'
  alias: 'Ice Maker Water High Temperature Action '
  description: Turn on the ice maker for a set time if the water temperature goes
    above a set threshold. Only run if ice maker is not already on.
  trigger:
  - platform: numeric_state
    entity_id: sensor.ice_maker_water_temperature
    above: input_number.ice_maker_water_high_temperature_threshold
  condition:
  - condition: device
    type: is_off
    device_id: 78678bdb2e4faa8982a4681b31f899ba
    entity_id: switch.ice_maker_switch
    domain: switch
  action:
  - type: turn_on
    device_id: 78678bdb2e4faa8982a4681b31f899ba
    entity_id: switch.ice_maker_switch
    domain: switch
  - delay:
      hours: 0
      minutes: 15
      seconds: 0
      milliseconds: 0
  - type: turn_off
    device_id: 78678bdb2e4faa8982a4681b31f899ba
    entity_id: switch.ice_maker_switch
    domain: switch
  mode: single

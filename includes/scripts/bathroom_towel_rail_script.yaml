############################################################
#
# Bathroom Towel Rail Script
#
############################################################

timed_heat_towel_rail:
  alias: "Turn on heat and set timer"
  sequence:
    # Cancel ev. old timers
    - service: script.turn_off
      data:
         entity_id: script.timer_off
    - service: climate.set_temperature
      entity_id: climate.entryway
      data:
         temperature: 27
         
    # Set new timer
    - service: script.turn_on
      data:
        entity_id: script.timer_off

timer_off:
  alias: "TIMER: Turn off heat after 60 minutes"
  sequence:
    #- delay: 
    - delay: '00:{{ states('input_slider.minute_delay') | int }}:00'
    #https://community.home-assistant.io/t/issues-with-input-slider-together-with-in-automation/1152/5 and https://community.home-assistant.io/t/would-somebody-walk-me-through-an-automation-to-set-a-timer-for-a-fan/1922/8
       # seconds: {{states("input_slider.slider1")}}
        #seconds: '{{ states.input_slider.slider1.state }}'
       # minutes: 60
    - service: climate.set_temperature
      entity_id: climate.entryway  
      data:
         temperature: 10
             
    

turn_off_heat_towel_rail:
  alias: "Turn off heat to towel rail"
  sequence:
    - service: climate.set_temperature
      entity_id: climate.entryway 
      data:
         temperature: 10
         
    - service: script.turn_off
      data:
         entity_id: script.timer_off


nest_test:
 sequence:
    - service: climate.set_temperature
      entity_id: climate.entryway 
      data:
         temperature: 15